<div class="ui-g">
  <div class="ui-g-12 no-padding">
    <div class="card no-padding">
      <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
          <div class="row">
            <div class="col-md-12">
              <h2 class="panel-title pull-left">
                {{formTitle}}
              </h2>
            </div>
          </div>
        </div>

        <div class="panel-body">
          <div class="form-horizontal">
            <form novalidate [formGroup]="form">

                <div class="form-group">
                    <label for="" class="control-label col-md-2">
                        Account Name
                    </label>
                    <div class="col-md-4">
                        <div class="input-group">
                          <input (focus)="openSearchBox()" type="text"
                            class="form-control" formControlName="productAccountName" placeholder="Search Customer" name="productAccountName">
                          <div class="input-group-btn">
                            <button (click)="openSearchBox()" style="padding-top:8px;padding-bottom:0px" class="btn btn-default"
                              type="button">
                              <i class="glyphicon glyphicon-search"></i>
                            </button>
                          </div>
                        </div>
                    </div>

                    <label for="" class="control-label col-md-2">
                        Product
                    </label>
                    <div class="col-md-4">
                      <select type="text" name="productId" formControlName="productId" id="productId" class="form-control">
                          <option value="">-- Select Product --</option>
                        <option *ngFor="let row of productInformation" [value]="row.productId">
                                                                                                                                                            {{ row.productName }}
                                                                                                                                                        </option>
                      </select>
                    </div>
                
                    <!-- <label for="" class="control-label col-md-2">
                        Account Number
                    </label>
                    <div class="col-md-4">
                      <input type="text" [attr.disabled]="true" formControlName="productAccountNumber" name="productAccountNumber" class="form-control" />
                    </div>-->
                  </div> 
              <div class="form-group">
                <!-- <label for="" class="control-label col-md-2">
                    Account Name
                </label>
                <div class="col-md-4">
                  <input type="text" formControlName="productAccountName" name="productAccountName" class="form-control" />
                </div> -->

                    <label for="" class="control-label col-md-2">
                        Account Number
                    </label>
                    <div class="col-md-4">
                      <input type="text" [attr.disabled]="true" formControlName="productAccountNumber" name="productAccountNumber" class="form-control" />
                    </div>

                <label for="" class="control-label col-md-2">
                    Available Balance
                </label>
                <div class="col-md-4">
                  <input type="number" formControlName="availableBalance" name="availableBalance" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label for="" class="control-label col-md-2">
                    Ledger Balance
                </label>
                <div class="col-md-4">
                  <input type="number" formControlName="ledgerBalance" name="ledgerBalance" class="form-control" />
                </div>

                <label for="" class="control-label col-md-2">
                    lien Amount
                </label>
                <div class="col-md-4">
                  <input type="number" formControlName="lienAmount" name="lienAmount" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label for="" class="control-label col-md-2">
                  Effective Date
                </label>
                <div class="col-md-4">
                  <p-calendar id="effectiveDate" class="form-control" formControlName="effectiveDate" [monthNavigator]="true"
                    [yearNavigator]="true" yearRange="1900:2030" [showIcon]="true" [inputStyle]="{'width': '100%'}"
                    [style]="{'width': '100%', 'z-index': '999'}"></p-calendar>
                </div>

                <label for="" class="control-label col-md-2">
                Interest Rate
                </label>
                <div class="col-md-4">
                    <input type="number" formControlName="interestRate" name="interestRate" class="form-control" />
                </div>
              </div>


              <div class="form-group">
                <label for="" class="control-label col-md-2">
                    Currency
                </label>
                <div class="col-md-4">
                  <select type="text" name="currencyId" formControlName="currencyId" id="currencyId" class="form-control">
                      <option value="">-- Select Country --</option>
                    <option *ngFor="let row of currencyInformation" [value]="row.currencyId">
                                                                                                                                                        {{ row.currencyName }}
                                                                                                                                                    </option>
                  </select>
                </div>

                <label for="" class="control-label col-md-2">
                  Company
                </label>

                <div class="col-md-4">
                        <select type="text" name="companyId" formControlName="companyId" id="companyId" class="form-control">
                            <option value="">-- Select Company --</option>
                            <option *ngFor="let row of companyInformation" [value]="row.companyStructureId"> {{ row.name }} </option>  
                        </select>
                </div>
              </div>

              <div class="form-group">
                  <label for="" class="control-label col-md-2">
                      Branch
                  </label>
                  <div class="col-md-4">
                    <select type="text" name="branchId" formControlName="branchId" id="branchId" class="form-control">
                        <option value="">-- Select Branch --</option>
                      <option *ngFor="let row of branchInformation" [value]="row.branchId">
                                                                                                                                                          {{ row.branchName }}
                                                                                                                                                      </option>
                    </select>
                  </div>
  
                  <label for="" class="control-label col-md-2">
                      Has Lien ?
                    </label>
                    <div class="col-md-4">
                      <input type="checkbox" [(ngModel)]="hasLien" binary="true" formControlName="hasLien" name="hasLien"/>
                    </div>
                </div>
              <div class="form-group">
                <label for="" class="control-label col-md-2">
                  OverdraftAmount
                </label>
                <div class="col-md-4">
                  <input type="number" formControlName="overdraftAmount" name="overdraftAmount" class="form-control" />
                </div>

                <label for="" class="control-label col-md-2">
                Overdraft InterestRate
                </label>
                <div class="col-md-4">
                  <input type="number" formControlName="overdraftInterestRate" name="overdraftInterestRate" class="form-control" />
                </div>
              </div>

              <div class="form-group">
                  <label for="" class="control-label col-md-2">
                      Overdraft ExpiryDate
                    </label>
                    <div class="col-md-4">
                      <p-calendar id="overdraftExpiryDate" class="form-control" formControlName="overdraftExpiryDate" [monthNavigator]="true"
                        [yearNavigator]="true" yearRange="1900:2030" [showIcon]="true" [inputStyle]="{'width': '100%'}"
                        [style]="{'width': '100%', 'z-index': '999'}"></p-calendar>
                    </div>
  
                  <label for="" class="control-label col-md-2">
                      Is it CurrentAccount?
                    </label>
                    <div class="col-md-4">
                      <input type="checkbox" [(ngModel)]="isCurrentAccount" binary="true" formControlName="isCurrentAccount" name="isCurrentAccount"/>
                    </div>
                </div>


                <div class="form-group">
                    <label for="" class="control-label col-md-2">
                        Tenor
                    </label>
                    <div class="col-md-4">
                      <input type="number" formControlName="tenor" name="tenor" class="form-control" />
                    </div>
    
                    <label for="" class="control-label col-md-2">
                      Team MisCode
                    </label>
                    <div class="col-md-4">
                      <input type="text" formControlName="teamMiscode" name="teamMiscode" class="form-control" />
                    </div>
                  </div>
            </form>
          </div>
        </div>
        <div class="panel-footer">
          <div class="row">
            <div class="col-md-12">
              <button style="margin-right:5px" type="button" [disabled]="!form.valid" class="btn btn-primary pull-right"
                (click)="submitCustomerAccountInfo(form)">
                Save
              </button>
              <button type="button" style="margin-right:5px" class="btn btn-danger pull-right" (click)="goBack()">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<p-dialog [responsive]=true [(visible)]="displaySearchModal" modal="modal" id="searchModal" showEffect="fade"
width="650">
<div style="margin-bottom:0" class="panel panel-default">
  <div class="panel-heading">
    <div style="margin-left:0" class="row">
      <h2 class="panel-title pull-left">
        Search Customer
      </h2>
    </div>
  </div>
  <div style="padding:3px" class="panel-body">
    <div class="form-group">
      <div class="col-md-12">
        <input type="text" id="search" (keyup)="searchDB($event.target.value)" class="form-control"
          placeholder="Type in your search parameter">
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-12">
        <p>
          <!--{{mfacilityType}}-->
        </p>
        <table  class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Registration Number</th>
              <th>Customer Name</th>
              <th>Customer</th>
            </tr>
          </thead>
          <tbody>
            <tr (click)="pickSearchedData(res)" style="cursor: pointer"
              *ngFor="let res of filteredSearchResults; let i = index">
              <td>{{res.registrationNo}}</td>
              <td>{{res.firstName}}</td>
              <td>{{res.customerId}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
</p-dialog>